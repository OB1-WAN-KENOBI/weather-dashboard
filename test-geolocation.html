<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–¢–µ—Å—Ç –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      margin: 50px auto;
      padding: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      min-height: 100vh;
    }

    .container {
      background: rgba(255, 255, 255, 0.1);
      padding: 30px;
      border-radius: 15px;
      backdrop-filter: blur(10px);
    }

    button {
      background: rgba(255, 255, 255, 0.2);
      border: 2px solid rgba(255, 255, 255, 0.3);
      color: white;
      padding: 15px 30px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 16px;
      margin: 10px;
      transition: all 0.3s ease;
    }

    button:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-2px);
    }

    .result {
      margin-top: 20px;
      padding: 15px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      white-space: pre-wrap;
    }

    .error {
      background: rgba(255, 100, 100, 0.3);
    }

    .success {
      background: rgba(100, 255, 100, 0.3);
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>üåç –¢–µ—Å—Ç –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏</h1>
    <p>–≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ.</p>

    <button onclick="testGeolocation()">üìç –ü–æ–ª—É—á–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</button>
    <button onclick="testWithOptions()">‚öôÔ∏è –¢–µ—Å—Ç —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏</button>
    <button onclick="clearResults()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>

    <div id="results" class="result"></div>
  </div>

  <script>
    function log(message, type = 'info') {
      const results = document.getElementById('results');
      const timestamp = new Date().toLocaleTimeString();
      const className = type === 'error' ? 'error' : type === 'success' ? 'success' : '';

      results.innerHTML += `<div class="${className}">[${timestamp}] ${message}</div>`;
      results.scrollTop = results.scrollHeight;
    }

    function clearResults() {
      document.getElementById('results').innerHTML = '';
    }

    function testGeolocation() {
      log('üìç –ù–∞—á–∏–Ω–∞–µ–º —Ç–µ—Å—Ç –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏...');

      if (!navigator.geolocation) {
        log('‚ùå –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ —ç—Ç–æ–º –±—Ä–∞—É–∑–µ—Ä–µ', 'error');
        return;
      }

      log('‚úÖ –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è');
      log('üîç –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ...');

      navigator.geolocation.getCurrentPosition(
        (position) => {
          log('‚úÖ –£–°–ü–ï–•! –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ:', 'success');
          log(`üìç –®–∏—Ä–æ—Ç–∞: ${position.coords.latitude}`);
          log(`üìç –î–æ–ª–≥–æ—Ç–∞: ${position.coords.longitude}`);
          log(`üìç –¢–æ—á–Ω–æ—Å—Ç—å: ${position.coords.accuracy} –º–µ—Ç—Ä–æ–≤`);
          log(`üìç –í—ã—Å–æ—Ç–∞: ${position.coords.altitude || '–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞'}`);
          log(`üìç –°–∫–æ—Ä–æ—Å—Ç—å: ${position.coords.speed || '–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞'}`);
          log(`üìç –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: ${position.coords.heading || '–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ'}`);
        },
        (error) => {
          log(`‚ùå –û–®–ò–ë–ö–ê –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏:`, 'error');
          log(`üîç –ö–æ–¥ –æ—à–∏–±–∫–∏: ${error.code}`);
          log(`üìù –°–æ–æ–±—â–µ–Ω–∏–µ: ${error.message}`);

          switch (error.code) {
            case 1:
              log('üí° –ü—Ä–æ–±–ª–µ–º–∞: –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º', 'error');
              log('üí° –†–µ—à–µ–Ω–∏–µ: –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—é –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±—Ä–∞—É–∑–µ—Ä–∞');
              break;
            case 2:
              log('üí° –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ', 'error');
              log('üí° –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:');
              log('   - –°–µ—Ä–≤–∏—Å—ã –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã');
              log('   - –ü—Ä–æ–±–ª–µ–º—ã —Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º');
              log('   - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞ localhost');
              break;
            case 3:
              log('üí° –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è', 'error');
              log('üí° –†–µ—à–µ–Ω–∏–µ: –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑');
              break;
            default:
              log('üí° –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞', 'error');
          }
        },
        {
          enableHighAccuracy: true,
          timeout: 10000,
          maximumAge: 60000
        }
      );
    }

    function testWithOptions() {
      log('‚öôÔ∏è –¢–µ—Å—Ç–∏—Ä—É–µ–º —Å –æ—Ç–∫–ª—é—á–µ–Ω–Ω–æ–π –≤—ã—Å–æ–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é...');

      if (!navigator.geolocation) {
        log('‚ùå –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è', 'error');
        return;
      }

      navigator.geolocation.getCurrentPosition(
        (position) => {
          log('‚úÖ –£–°–ü–ï–• —Å –Ω–∏–∑–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é!', 'success');
          log(`üìç –®–∏—Ä–æ—Ç–∞: ${position.coords.latitude}`);
          log(`üìç –î–æ–ª–≥–æ—Ç–∞: ${position.coords.longitude}`);
          log(`üìç –¢–æ—á–Ω–æ—Å—Ç—å: ${position.coords.accuracy} –º–µ—Ç—Ä–æ–≤`);
        },
        (error) => {
          log(`‚ùå –û—à–∏–±–∫–∞ –¥–∞–∂–µ —Å –Ω–∏–∑–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é: ${error.message}`, 'error');
        },
        {
          enableHighAccuracy: false,
          timeout: 15000,
          maximumAge: 300000
        }
      );
    }

    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    window.addEventListener('load', () => {
      log('üöÄ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
      log(`üåê URL: ${window.location.href}`);
      log(`üîí –ü—Ä–æ—Ç–æ–∫–æ–ª: ${window.location.protocol}`);
      log(`üè† –•–æ—Å—Ç: ${window.location.hostname}`);

      if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
        log('‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –í—ã –Ω–∞ localhost!', 'error');
        log('üí° –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ localhost');
        log('üí° –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π URL');
      }
    });
  </script>
</body>

</html>